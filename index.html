<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sorpresa de cumplea√±os</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#f59e0b;--muted:#94a3b8}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e6eef8;background:linear-gradient(160deg,var(--bg),#071126);}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:28px;border-radius:16px;max-width:720px;width:100%;box-shadow:0 8px 30px rgba(2,6,23,0.7)}
    h1{margin:0 0 8px;font-size:26px}
    p.lead{color:var(--muted);margin-top:0}
    .choices{display:flex;flex-direction:column;gap:12px;margin-top:18px}
    button.opt{background:transparent;border:2px solid rgba(255,255,255,0.06);padding:12px 16px;border-radius:10px;text-align:left;color:#e6eef8;font-weight:600;cursor:pointer}
    button.opt:hover{border-color:var(--accent);transform:translateY(-2px)}
    .small{font-size:13px;color:var(--muted)}
    .back{margin-top:12px;background:none;border:0;color:var(--muted);cursor:pointer}
    .hidden{display:none}
    .center{display:flex;align-items:center;gap:12px}
    .gift{margin-top:18px;padding:16px;border-radius:12px;background:rgba(255,255,255,0.02)}
    .confetti{position:fixed;left:0;right:0;top:0;bottom:0;pointer-events:none}
    img.cover{width:100%;height:auto;border-radius:10px;margin-top:12px}
    footer{margin-top:18px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <main class="card" id="app">
      <header>
        <h1 id="title">¬°Feliz cumplea√±os!</h1>
        <p class="lead" id="subtitle">Has sido convocada a una aventura muy especial... elige con cuidado.</p>
      </header>
      <section id="scene" aria-live="polite"></section>
      <footer>
        <p class="small">Sorpresa creada con ‚ù§Ô∏è ‚Äî ¬°no compartas el enlace si quieres mantener la sorpresa!</p>
      </footer>
    </main>
  </div>
  <canvas class="confetti" id="confettiCanvas"></canvas>

  <script>
    const CONFIG = {
      birthdayName: 'Mar√≠a',
      startTitle: 'Una Aventura para {name}',
      startSubtitle: 'Cada elecci√≥n te acerca (o te aleja) de tu regalo... sigue tu intuici√≥n.',
      coverImage: '',
      scenes: {
        start: {
          text: 'Es la ma√±ana de tu cumplea√±os. Entra una nota: "Para encontrar tu regalo, sigue las pistas y elige sabiamente." ¬øQu√© haces primero?',
          choices:[{text:'Investigar la nota', to:'nota'},{text:'Ir a la cocina a desayunar', to:'cocina'},{text:'Llamar a una amiga', to:'llamada'}]
        },
        nota:{ text:'La nota tiene un acertijo: "Donde cantan las tazas, y el reloj da las horas, ah√≠ est√° la pista". ¬øD√≥nde buscas?', choices:[{text:'En la cocina', to:'cocina'},{text:'En el sal√≥n junto al reloj', to:'salon'}] },
        cocina:{ text:'En la cocina, encuentras una taza con una palabra escrita en el fondo: "SO√ëAR". Tambi√©n hay otra nota: "Piensa en tu lugar favorito".', choices:[{text:'Ir al balc√≥n (tu lugar favorito)', to:'balcon'},{text:'Buscar en el armario', to:'armario'}] },
        salon:{ text:'Junto al reloj hay una foto con una flecha apuntando a la estanter√≠a. Dentro hay un sobre.', choices:[{text:'Abrir el sobre', to:'sobre'},{text:'Ignorar y llamar a alguien', to:'llamada'}] },
        balcon:{ text:'En el balc√≥n, entre macetas, est√° el regalo final: una caja con tu nombre. ¬°Felicidades! Has encontrado tu regalo.', choices:[{text:'Abrir regalo', to:'final'},{text:'Esperar y compartir con amigos', to:'final'}] },
        armario:{ text:'El armario est√° vac√≠o salvo una nota que dice "casi". Vuelve a intentarlo.', choices:[{text:'Volver al inicio', to:'start'},{text:'Ir al sal√≥n', to:'salon'}] },
        sobre:{ text:'Dentro del sobre hay un mapa que indica el balc√≥n. Parece que est√°s cerca.', choices:[{text:'Seguir el mapa', to:'balcon'},{text:'Ignorar y volver', to:'start'}] },
        llamada:{ text:'Tu amiga te da un abrazo y te dice que hay una sorpresa en casa. Te anima a buscar en el balc√≥n.', choices:[{text:'Ir al balc√≥n', to:'balcon'},{text:'Seguir hablando', to:'start'}] },
        final:{ text:'¬°Sorpresa! Dentro de la caja hay tu regalo: una escapada, una carta o lo que quieras poner aqu√≠. üéâ', choices:[] }
      },
      finalMessage: '¬°Feliz cumplea√±os, {name}! Esperamos que te haya gustado la peque√±a aventura.',
      giftImage: ''
    }

    function t(s){ return s.replace(/{name}/g, CONFIG.birthdayName) }
    const sceneEl = document.getElementById('scene')
    document.getElementById('title').innerText = t(CONFIG.startTitle)
    document.getElementById('subtitle').innerText = t(CONFIG.startSubtitle)

    function render(id){
      const scene = CONFIG.scenes[id]
      sceneEl.innerHTML = ''
      const p = document.createElement('p')
      p.className = 'small'
      p.innerText = scene.text
      sceneEl.appendChild(p)
      const choices = document.createElement('div')
      choices.className='choices'
      scene.choices.forEach(c=>{
        const b = document.createElement('button')
        b.className='opt'
        b.innerText = c.text
        b.addEventListener('click',()=>render(c.to))
        choices.appendChild(b)
      })
      sceneEl.appendChild(choices)
      if(scene.choices.length===0){
        const gift = document.createElement('div')
        gift.className='gift'
        gift.innerHTML = `<strong>${t(CONFIG.finalMessage)}</strong><p class="small">${scene.text}</p>`
        sceneEl.appendChild(gift)
        launchConfetti()
      }
      if(id!=='start'){
        const back = document.createElement('button')
        back.className='back'
        back.innerText='‚Üê Volver'
        back.addEventListener('click',()=>render('start'))
        sceneEl.appendChild(back)
      }
    }

    function launchConfetti(){
      const canvas = document.getElementById('confettiCanvas')
      const ctx = canvas.getContext('2d')
      canvas.width=window.innerWidth;canvas.height=window.innerHeight
      const pieces=[];const colors=['#f59e0b','#f97316','#fb923c','#fde68a','#fff']
      for(let i=0;i<130;i++) pieces.push({x:Math.random()*canvas.width,y:Math.random()*-canvas.height,vy:2+Math.random()*4,angle:Math.random()*360,r:2+Math.random()*6,c:colors[Math.floor(Math.random()*colors.length)]})
      let t=0
      function frame(){
        t++
        ctx.clearRect(0,0,canvas.width,canvas.height)
        pieces.forEach(p=>{
          p.x += Math.sin((p.y+t)/20)*1.5
          p.y += p.vy
          ctx.fillStyle=p.c
          ctx.save();ctx.translate(p.x,p.y);ctx.rotate((p.angle+t/3)*Math.PI/180)
          ctx.fillRect(-p.r/2,-p.r/2,p.r,p.r*1.6)
          ctx.restore()
          if(p.y>canvas.height+20){p.y=-20;p.x=Math.random()*canvas.width}
        })
        if(t<800) requestAnimationFrame(frame)
      }
      frame()
    }
    render('start')
  </script>
</body>
</html>
